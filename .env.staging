# üß™ STAGING ENVIRONMENT CONFIGURATION
# C√≥pia este arquivo para .env.staging e preencha com valores de staging
# N√ÉO COMMITAR ESTE ARQUIVO COM VALORES REAIS

# ==================== AMBIENTE ====================
NODE_ENV=staging
APP_VERSION=1.0.0-staging

# ==================== SERVIDOR ====================
# Porta do servidor (padr√£o: detectar automaticamente)
PORT=3001

# URL da aplica√ß√£o (para redirects, emails, etc)
APP_URL=https://staging.seudominio.com

# URLs permitidas para CORS
ALLOWED_ORIGINS=https://staging.seudominio.com,https://admin.staging.seudominio.com,http://localhost:3000

# ==================== BANCO DE DADOS ====================
# Format: mysql://usuario:senha@host:porta/banco
# Railway: Obt√©m automaticamente (conectar Railway como provider)
# Local: mysql://root:password@localhost:3306/elevare_staging
DATABASE_URL=mysql://user:pass@staging-db.railway.app:3306/elevare_staging

# ==================== AUTENTICA√á√ÉO ====================
# JWT Secret (m√≠nimo 32 caracteres - use openssl rand -base64 32)
JWT_SECRET=seu_jwt_secret_staging_aqui_minimo_32_caracteres_random

# OAuth2 - Manus (obter em https://manus.app)
MANUS_CLIENT_ID=staging_manus_client_id
MANUS_CLIENT_SECRET=staging_manus_client_secret
MANUS_REDIRECT_URI=https://staging.seudominio.com/api/auth/manus/callback

# ==================== CRIPTOGRAFIA ====================
# Encryption Key (m√≠nimo 32 caracteres - use openssl rand -base64 32)
ENCRYPTION_KEY=sua_encryption_key_staging_aqui_minimo_32_caracteres

# ==================== PAGAMENTOS - STRIPE ====================
# Obter em https://dashboard.stripe.com/apikeys
# Usar TEST KEYS para staging
STRIPE_PUBLIC_KEY=pk_test_seu_chave_publica_stripe
STRIPE_SECRET_KEY=sk_test_sua_chave_secreta_stripe

# Webhook Secret (obter em https://dashboard.stripe.com/webhooks)
# Comando para gerar local: stripe listen --forward-to localhost:3001/api/stripe/webhook
STRIPE_WEBHOOK_SECRET=whsec_sua_webhook_secret_stripe

# ==================== EMAIL ====================
# SendGrid (recomendado para staging)
SENDGRID_API_KEY=SG.sua_chave_sendgrid_aqui

# Ou Resend (alternativa)
RESEND_API_KEY=re_sua_chave_resend_aqui

# Email "from" padr√£o
EMAIL_FROM=noreply@staging.seudominio.com
ADMIN_EMAIL=admin@seudominio.com

# ==================== IA - GEMINI ====================
# Obter em https://makersuite.google.com/app/apikeys
GEMINI_API_KEY=sua_chave_api_gemini_aqui

# ==================== MONITORAMENTO ====================
# Sentry (error tracking)
# Criar projeto em https://sentry.io
SENTRY_DSN=https://sua_chave@sentry.io/projeto_id

# Alternativa: Datadog
DATADOG_API_KEY=seu_datadog_api_key

# ==================== LOGGING ====================
# N√≠vel de log: debug, info, warn, error
LOG_LEVEL=info

# Enviar logs para servi√ßo externo (opcional)
LOG_SERVICE=sentry

# ==================== CACHE ====================
# Usar Redis para cache distribu√≠do (opcional)
# Redis produ√ß√£o: redis://user:pass@redis.railway.app:6379
# Local: redis://localhost:6379
REDIS_URL=redis://staging-redis.railway.app:6379

# TTL em segundos (padr√£o: 300 = 5 min)
CACHE_TTL=300

# ==================== AWS S3 (opcional) ====================
# Para upload de arquivos
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=seu_access_key_id
AWS_SECRET_ACCESS_KEY=seu_secret_access_key
AWS_S3_BUCKET=seu_bucket_staging

# ==================== DEBUGGIN ====================
# Ativar logs detalhados
DEBUG=elevare:*

# Modo de desenvolvimento (auto reload)
WATCH_MODE=false

# ==================== CHECKLIST DE CONFIGURA√á√ÉO ====================
# 
# ‚úÖ Antes de fazer deploy em staging:
#
# 1. DATABASE
#    [ ] Criar banco de dados MySQL em staging (Railway ou outra)
#    [ ] Preencher DATABASE_URL
#    [ ] Executar: pnpm db:push
#
# 2. STRIPE
#    [ ] Usar TEST API KEYS (come√ßam com pk_test_, sk_test_)
#    [ ] Configurar webhook em https://dashboard.stripe.com/webhooks
#    [ ] Preencher STRIPE_WEBHOOK_SECRET
#
# 3. EMAIL
#    [ ] Criar conta SendGrid/Resend
#    [ ] Preencher SENDGRID_API_KEY ou RESEND_API_KEY
#    [ ] Testar envio: curl -X POST http://localhost:3001/api/email/test
#
# 4. AUTENTICA√á√ÉO
#    [ ] Criar OAuth2 app em Manus (ou adaptar para seu provider)
#    [ ] Preencher MANUS_CLIENT_ID, MANUS_CLIENT_SECRET, MANUS_REDIRECT_URI
#
# 5. GEMINI
#    [ ] Criar API key em https://makersuite.google.com/app/apikeys
#    [ ] Preencher GEMINI_API_KEY
#
# 6. MONITORAMENTO
#    [ ] Criar projeto Sentry em https://sentry.io
#    [ ] Preencher SENTRY_DSN
#
# 7. SEGURAN√áA
#    [ ] Gerar JWT_SECRET: openssl rand -base64 32
#    [ ] Gerar ENCRYPTION_KEY: openssl rand -base64 32
#    [ ] Verificar ALLOWED_ORIGINS
#
# 8. DEPLOY
#    [ ] Copiar este arquivo para .env.staging (NUNCA commitar)
#    [ ] Rodar valida√ß√£o: node scripts/production-readiness.ts
#    [ ] Deploy em Railway/Vercel
#    [ ] Verificar logs: railway logs -f
#
# ==================== REFER√äNCIAS ====================
#
# Railway Docs: https://docs.railway.app
# Stripe Test Mode: https://stripe.com/docs/testing
# SendGrid: https://sendgrid.com/docs
# Sentry: https://sentry.io/docs
# Gemini API: https://ai.google.dev
#
# ==================== SUPORTE ====================
#
# Problemas comuns:
# 
# ‚ùå "Database connection refused"
#    ‚Üí Verificar DATABASE_URL
#    ‚Üí Executar: mysql -u user -p -h host database
#    ‚Üí Railway: Usar URL completo com credenciais
#
# ‚ùå "Invalid Stripe key"
#    ‚Üí Verificar se s√£o KEYS de TEST (pk_test_, sk_test_)
#    ‚Üí N√£o usar LIVE keys em staging
#    ‚Üí Regenerar em https://dashboard.stripe.com/apikeys
#
# ‚ùå "Email not sending"
#    ‚Üí Verificar SENDGRID_API_KEY
#    ‚Üí Testar: curl -H "Authorization: Bearer $SENDGRID_API_KEY" https://api.sendgrid.com/v3/mail/send
#    ‚Üí Verificar spam folder
#
# ‚ùå "Sentry not capturing errors"
#    ‚Üí Verificar SENTRY_DSN (deve ser v√°lido)
#    ‚Üí NODE_ENV deve ser "staging" ou "production"
#    ‚Üí Testar: throw new Error("Test") no c√≥digo
